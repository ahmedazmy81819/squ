<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูุนุจุฉ ุงููุฑุจุนุงุช</title>
  <!-- ุฅุถุงูุฉ ููุชุจุฉ Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="styles.css"> <!-- ุฑุงุจุท ููู CSS -->
</head>
<body>
  <!-- ุฅุถุงูุฉ ุฒุฑ ุงูุชุจุฏูู ูู ุฃุนูู ุงููุณุงุฑ -->
  <div id="toggleMenu" onclick="toggleOptionsVisibility()">
    <div class="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <div id="toggleOptions" style="display:none;">
    <button id="toggleGoalsBtn" onclick="toggleGoalsPanel()">ุนุฑุถ ุงููููุงุช</button>
    <button id="toggleSquaresBtn" onclick="toggleSquaresPanel()">ุนุฑุถ ุงููุฑุจุนุงุช</button>
    <button onclick="saveGame()">ุญูุธ ุงููุนุจุฉ</button>
    <button onclick="loadGame()">ุชุญููู ุงููุนุจุฉ</button>
  </div>
  
  <div class="menu">
    <h3>ุงููุฑุจุนุงุช:</h3>
    <p><span style="background-color: #32CD32; width: 20px; height: 20px; display: inline-block;"></span> ุนุดุจ: <span id="grassCount">0</span></p>
    <p><span style="background-color: #A9A9A9; width: 20px; height: 20px; display: inline-block;"></span> ุญุฌุฑ: <span id="stoneCount">0</span></p>
    <p><span style="background-color: #FFD700; width: 20px; height: 20px; display: inline-block;"></span> ุฐูุจ: <span id="goldCount">0</span></p>
    <p><span style="background-color: #00CED1; width: 20px; height: 20px; display: inline-block;"></span> ุฃููุงุณ: <span id="diamondCount">0</span></p>
    <p>๐ฃ ูุชูุฌุฑุงุช: <span id="bombCount">0</span></p>
  </div>
  <div>
    <h1>ูุนุจุฉ ุงููุฑุจุนุงุช</h1>
    <!-- Added money display -->
    <p id="money">0</p>
    <div class="controls">
      <button id="nextLevelBtn" style="display:none;" onclick="attemptLevelAdvance()">ุงููุณุชูู ุงูุชุงูู</button>
    </div>
    <div id="squares" class="container"></div>
  </div>
  <!-- Add score display element above the money button -->
  <div id="scoreDisplay" class="score-display">0</div>
  <button class="money-button" onclick="addMoney()">+</button>

  <!-- ุดุงุดุฉ ุงููุชุฌุฑ -->
  <div class="overlay" id="overlay"></div>
  <div class="store" id="store">
    <div class="tabs">
      <button onclick="switchTab('items')" class="active">ุงูุนูุงุตุฑ</button>
      <button onclick="switchTab('upgrades')">ุงูุชุฑููุงุช</button>
    </div>
    <div id="itemsTab">
      <h2>ุงููุชุฌุฑ - ุงูุนูุงุตุฑ</h2>
      <div class="bomb-info">
        <p>ุนุฏุฏ ุงููุชูุฌุฑุงุช: <span id="storeBombCount">0</span></p>
      </div>
      <div class="store-item">
        <span>ุดุฑุงุก ูุชูุฌุฑุฉ (1000 ููุทุฉ)</span>
        <button onclick="buyItem('bomb', 1000)">ุดุฑุงุก</button>
      </div>
    </div>
    <div id="upgradesTab" style="display: none;">
      <h2>ุงููุชุฌุฑ - ุงูุชุฑููุงุช</h2>
      <div class="upgrade-info">
        <p>ุณุฑุนุฉ ุฌูุน ุงูููุงุฑุฏ: <span id="speedLevel">1</span> (ุงูุณุนุฑ: <span id="speedPrice">100</span>)</p>
        <p>ูุถุงุนู ุงูุฃุณุนุงุฑ: <span id="priceLevel">1</span> (ุงูุณุนุฑ: <span id="pricePrice">200</span>)</p>
        <p>ููุฉ ุงููุชูุฌุฑุงุช: <span id="bombPowerLevel">1</span> (ุงูุณุนุฑ: <span id="bombPowerPrice">150</span>)</p>
      </div>
      <div class="store-item">
        <span>ุฒูุงุฏุฉ ุณุฑุนุฉ ุฌูุน ุงูููุงุฑุฏ</span>
        <button onclick="buyUpgrade('speed')">ุดุฑุงุก</button>
      </div>
      <div class="store-item">
        <span>ุชูููู ุฃุณุนุงุฑ ุงููุฑุจุนุงุช</span>
        <button onclick="buyUpgrade('price')">ุดุฑุงุก</button>
      </div>
      <div class="store-item">
        <span>ุฒูุงุฏุฉ ููุฉ ุงููุชูุฌุฑุงุช</span>
        <button onclick="buyUpgrade('bombPower')">ุดุฑุงุก</button>
      </div>
    </div>
    <button onclick="closeStore()">ุฅุบูุงู ุงููุชุฌุฑ</button>
  </div>

  <!-- ุดุงุดุฉ ุงูุซููุงุช ุงูุฌุฏูุฏุฉ ูุดุงุจูุฉ ูููุชุฌุฑ -->
  <div class="overlay" id="themeOverlay" style="display:none;"></div>
  <div class="store" id="themeScreen" style="display:none;">
    <h2>ุงุฎุชุฑ ููู ูุฑุจุนู</h2>
    <div class="theme-options">
      <!-- Updated: added "theme-option" class and pass 'this' -->
      <button class="theme-option" style="background-color: #4CAF50;" onclick="selectThemeColor('#4CAF50', this)"></button>
      <button class="theme-option" style="background-color: #FF0000;" onclick="selectThemeColor('#FF0000', this)"></button>
      <button class="theme-option" style="background-color: #0000FF;" onclick="selectThemeColor('#0000FF', this)"></button>
      <button class="theme-option" style="background-color: #FFD700;" onclick="selectThemeColor('#FFD700', this)"></button>
      <button class="theme-option" style="background-color: #A9A9A9;" onclick="selectThemeColor('#A9A9A9', this)"></button>
    </div>
    <button onclick="closeThemeScreen()">ุฅุบูุงู</button>
  </div>

  <!-- ูุณู ุงูุฃูุฏุงู -->
  <div class="goals">
    <h3>ุงูุฃูุฏุงู:</h3>
    <div id="goalsList"></div>
  </div>
  
  <!-- ุฅุถุงูุฉ ูุฑุจุน ุงููุฑุจุนุงุช ุจููุณ ุชุตููู ุฃูุฏุงู ุงููุนุจุฉ -->
  <div id="squaresPanel" class="goals" style="display:none;">
    <h3>ุงููุฑุจุนุงุช:</h3>
    <!-- ูุญุชูู ุงููุฑุจุนุงุช ุงูุชู ุฌูุนุชูุง -->
    <div id="squaresContent">ุงููุฑุจุนุงุช ุงูุชู ุฌูุนุชูุง</div>
  </div>

  <!-- ุชุนุฏูู ุฒุฑ ุงูุซูู: ุชุบููุฑ onclick ูู openThemeScreen() ุฅูู themeButtonClicked() -->
  <div id="themeButton" onclick="themeButtonClicked()">
    <span class="theme-icon">๐จ</span>
  </div>
  <!-- ุฅุฒุงูุฉ ุฒุฑ ุงูููุฏ ุงูุบุด ุงููุฏูู -->
  <!-- Existing fixed store button -->
  <div id="storeButton" onclick="openStore()">
    <span class="store-icon">๐</span>
  </div>
  <!-- Existing fixed bomb button -->
  <div id="bombButton" onclick="activateBomb()">
    <span class="bomb-emoji">๐ฃ</span>
    <div id="bombCounter">0</div>
  </div>

  <!-- ุฅุถุงูุฉ ุดุงุดุฉ ุงููุตุฑ -->
  <div id="victoryScreen" style="display:none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); z-index:2000; display:flex; flex-direction:column; justify-content:center; align-items:center;">
    <div id="victoryMessage" class="animate__animated" style="background: #4CAF50; padding: 30px; border-radius:10px; text-align:center;">
      <h1>ูุจุฑูู!</h1>
      <!-- ุฒุฑุงุฑูู -->
      <button onclick="continueGame()" style="padding: 10px 20px; margin: 10px;">ุงุณุชูุฑ ูู ุงููุนุจ</button>
      <button onclick="nextLevel()" style="padding: 10px 20px; margin: 10px;">ุงููุณุชูู ุงูุชุงูู</button>
    </div>
  </div>

  <script src="script.js"></script>
  <script src="level.js"></script>
</body>
</html>